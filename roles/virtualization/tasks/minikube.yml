---
- name : Appending the user 'hos7ein' to group 'libvirt'
  user:
    name: hos7ein
    group: libvirt
    append: yes

- name: Install docker-machine-driver-kvm2
  get_url:
    url: https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-kvm2
    dest: /usr/local/bin/docker-machine-driver-kvm2
    mode: '0555'

- name: Install Minikube
  get_url:
    url: https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
    dest: /usr/local/bin/minikube
    mode: '0555'

- name : Install kubectl
  dnf:
    name:
      - kubernetes-client
    state: present
  retries: 3
  delay: 5
  register: result
  until: result is succeeded



##test
- name: get users of libvirt
  shell: cat  /etc/group | grep libvirt
  register: users_libvirt

- name: Show users of libvirt
  debug:
    var: users_libvirt

- name: get list of users
  shell: cat /etc/passwd | grep hos7ein
  register: list_users

- name: Show list of users
  debug:
    var: list_users

